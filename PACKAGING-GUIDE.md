# macOS æ‰“åŒ…å®Œå…¨æŒ‡å—

## ðŸŽ¯ å¿«é€Ÿé€‰æ‹©

| ä½ çš„éœ€æ±‚ | æŽ¨èæ–¹æ¡ˆ | å‘½ä»¤ |
|---------|---------|------|
| æ—¥å¸¸å¼€å‘æµ‹è¯• | æ ‡å‡†æ‰“åŒ… | `./build-macos.sh` |
| **æ­£å¼å‘å¸ƒåˆ†å‘** | è½»é‡çº§æ‰“åŒ… | `./build-macos-lite.sh` |
| éœ€è¦ .app å›¾æ ‡ | é«˜çº§æ‰“åŒ… | `./build-macos-advanced.sh` |
| æœ€å°ä½“ç§¯ | âŒ ä¸æŽ¨è | è§ä¸‹æ–‡è¯´æ˜Ž |

## ðŸ“Š ä¸åŒæ‰“åŒ…æ–¹å¼è¯¦è§£

### 1. æ ‡å‡†æ‰“åŒ… (35MB)

```bash
./build-macos.sh
```

**è¾“å‡º**ï¼š`dist/FileDownloader/` æ–‡ä»¶å¤¹

**ç‰¹ç‚¹**ï¼š
- âœ… å¿«é€Ÿæ‰“åŒ…ï¼Œé€‚åˆå¼€å‘æµ‹è¯•
- âœ… è‡ªåŠ¨æ£€æµ‹æ‰€æœ‰ä¾èµ–
- âœ… è™šæ‹ŸçŽ¯å¢ƒéš”ç¦»
- âœ… å¯åŠ¨é€Ÿåº¦å¿«

**ä½¿ç”¨åœºæ™¯**ï¼šæ—¥å¸¸å¼€å‘ã€æœ¬åœ°æµ‹è¯•

---

### 2. è½»é‡çº§æ‰“åŒ… (33MB) â­

```bash
./build-macos-lite.sh
```

**è¾“å‡º**ï¼š`dist/FileDownloader/` æ–‡ä»¶å¤¹ï¼ˆä¼˜åŒ–åŽï¼‰

**ç‰¹ç‚¹**ï¼š
- âœ… æŽ’é™¤ä¸å¿…è¦çš„å¤§åž‹åº“
- âœ… ä¼˜åŒ– Python å­—èŠ‚ç  (`--optimize 2`)
- âœ… æ¯”æ ‡å‡†ç‰ˆå° 5-10%
- âœ… ä¿æŒå¿«é€Ÿå¯åŠ¨

**ä¼˜åŒ–å†…å®¹**ï¼š
- æŽ’é™¤ï¼šmatplotlib, numpy, pandas, scipy, PIL
- æŽ’é™¤ï¼šPyQt5/6, PySide2/6, wx
- æŽ’é™¤ï¼šIPython, jupyter, pytest, sphinx

**ä½¿ç”¨åœºæ™¯**ï¼šæ­£å¼å‘å¸ƒã€ç”¨æˆ·åˆ†å‘

---

### 3. é«˜çº§æ‰“åŒ… (35MB + .app)

```bash
./build-macos-advanced.sh
```

**è¾“å‡º**ï¼š`dist/FileDownloader.app` - çœŸæ­£çš„ macOS åº”ç”¨åŒ…

**ç‰¹ç‚¹**ï¼š
- âœ… ç”Ÿæˆ `.app` bundleï¼ˆä¸“ä¸šå¤–è§‚ï¼‰
- âœ… åŒå‡»å³å¯è¿è¡Œ
- âœ… macOS åŽŸç”Ÿåº”ç”¨ä½“éªŒ
- âœ… åŠ¨æ€ç”Ÿæˆä¼˜åŒ–é…ç½®

**ä½¿ç”¨åœºæ™¯**ï¼šéœ€è¦ä¸“ä¸šå¤–è§‚ã€App Store åˆ†å‘

---

### 4. `--onefile` å•æ–‡ä»¶æ¨¡å¼ (11MB) âŒ ä¸æŽ¨è

```bash
# ä»…ä½œè¯´æ˜Žï¼Œä¸æŽ¨èä½¿ç”¨
pyinstaller --onefile file_downloader.py
```

**è¾“å‡º**ï¼š`dist/file_downloader` å•ä¸ªå¯æ‰§è¡Œæ–‡ä»¶

**çœ‹èµ·æ¥çš„ä¼˜åŠ¿**ï¼š
- ä½“ç§¯å°ï¼ˆ11MBï¼‰
- å•ä¸ªæ–‡ä»¶

**å®žé™…çš„é—®é¢˜**ï¼š

#### âŒ å¯åŠ¨æ…¢
æ¯æ¬¡è¿è¡Œéƒ½è¦è§£åŽ‹ï¼š
```
è¿è¡Œ â†’ è§£åŽ‹åˆ° /var/folders/xxx/ â†’ å ç”¨ 35MB ä¸´æ—¶ç©ºé—´ â†’ å¯åŠ¨åº”ç”¨
```
é¦–æ¬¡å¯åŠ¨å¯èƒ½éœ€è¦ 3-5 ç§’ã€‚

#### âŒ ä¸´æ—¶æ–‡ä»¶é—®é¢˜
- æ¯æ¬¡è¿è¡Œåœ¨ `/var/folders/` åˆ›å»º 30-40MB æ–‡ä»¶
- å¯èƒ½ä¸ä¼šè‡ªåŠ¨æ¸…ç†
- é•¿æœŸä½¿ç”¨ä¼šå ç”¨å¤§é‡ç£ç›˜

#### âŒ macOS å…¼å®¹æ€§é—®é¢˜
- Gatekeeper å®‰å…¨è­¦å‘Š
- ä»£ç ç­¾åå¤æ‚
- æ— æ³•é€šè¿‡ App Store å®¡æ ¸
- ä¸ç¬¦åˆ macOS Human Interface Guidelines

#### âŒ ä¸Ž .app å†²çª
- ä¸èƒ½åŒæ—¶æ˜¯å•æ–‡ä»¶å’Œ .app bundle
- å¤±åŽ» macOS åŽŸç”Ÿåº”ç”¨å¤–è§‚
- æ— æ³•è®¾ç½®åº”ç”¨å›¾æ ‡ã€ç‰ˆæœ¬ä¿¡æ¯ç­‰

## ðŸ’¡ ä¸ºä»€ä¹ˆä½ ä¹‹å‰çœ‹åˆ° 11MBï¼Ÿ

ä½ ä¹‹å‰æ‰“åŒ…å‡ºçš„ 11MB æ–‡ä»¶æ˜¯ä½¿ç”¨äº† `--onefile` æ¨¡å¼ï¼š

```bash
pyinstaller --onefile file_downloader.py
```

è™½ç„¶ä½“ç§¯å°ï¼Œä½†ï¼š
1. **è¿è¡Œæ—¶ä»éœ€è¦ 35MB ç©ºé—´**ï¼ˆè§£åŽ‹åˆ°ä¸´æ—¶ç›®å½•ï¼‰
2. **å¯åŠ¨æ…¢**ï¼ˆæ¯æ¬¡éƒ½è¦è§£åŽ‹ï¼‰
3. **ä¸é€‚åˆ macOS**

## âœ… æ­£ç¡®çš„è½»é‡åŒ–æ–¹æ¡ˆ

### æ–¹æ¡ˆå¯¹æ¯”

| æ–¹æ¡ˆ | ç£ç›˜å ç”¨ | è¿è¡Œæ—¶å ç”¨ | å¯åŠ¨é€Ÿåº¦ | macOS å…¼å®¹ |
|-----|---------|-----------|---------|-----------|
| **è½»é‡çº§æ‰“åŒ…** | 33MB | 33MB | å¿« âš¡ | âœ… å®Œç¾Ž |
| --onefile | 11MB | 11MB + 35MB ä¸´æ—¶ | æ…¢ ðŸŒ | âš ï¸ æœ‰é—®é¢˜ |

### æŽ¨èï¼šè½»é‡çº§æ‰“åŒ…

```bash
./build-macos-lite.sh
```

**ä¼˜åŠ¿**ï¼š
- âœ… ä½“ç§¯ä¼˜åŒ–ï¼ˆ33MB vs 35MBï¼‰
- âœ… å¿«é€Ÿå¯åŠ¨ï¼ˆæ— éœ€è§£åŽ‹ï¼‰
- âœ… æ— ä¸´æ—¶æ–‡ä»¶
- âœ… å®Œå…¨å…¼å®¹ macOS
- âœ… å¯ä»¥è¿›ä¸€æ­¥ç”Ÿæˆ .app

### å¦‚æžœéœ€è¦æ›´å°ä½“ç§¯

å¦‚æžœ 33MB è¿˜æ˜¯å¤ªå¤§ï¼Œå¯ä»¥è€ƒè™‘ï¼š

1. **è¿›ä¸€æ­¥æŽ’é™¤æ¨¡å—**
   ç¼–è¾‘ `build-macos-lite.sh`ï¼Œæ·»åŠ æ›´å¤š `--exclude-module`

2. **ä½¿ç”¨ UPX åŽ‹ç¼©**ï¼ˆæœ‰é£Žé™©ï¼‰
   ```bash
   # å¯èƒ½å‡å° 20-30%ï¼Œä½†æœ‰å…¼å®¹æ€§é£Žé™©
   pyinstaller --onedir --upx-dir=/path/to/upx ...
   ```

3. **åˆ†å‘ä¸º .zip**
   ```bash
   cd dist
   zip -r FileDownloader.zip FileDownloader/
   # åŽ‹ç¼©åŽçº¦ 15-20MB
   ```

## ðŸš€ æœ€ä½³å®žè·µæ€»ç»“

### æ—¥å¸¸å¼€å‘
```bash
./build-macos.sh  # æ ‡å‡†æ‰“åŒ…ï¼Œ35MB
```

### æ­£å¼å‘å¸ƒ
```bash
./build-macos-lite.sh  # è½»é‡çº§ï¼Œ33MB
```

### éœ€è¦ .app å›¾æ ‡
```bash
./build-macos-advanced.sh  # é«˜çº§æ‰“åŒ…ï¼Œ35MB + .app
```

### âŒ ä¸è¦ä½¿ç”¨
```bash
pyinstaller --onefile ...  # è™½ç„¶å°ä½†æœ‰å¾ˆå¤šé—®é¢˜
```

## ðŸ“ æ€»ç»“

**11MB çš„å•æ–‡ä»¶çœ‹èµ·æ¥å¾ˆå¸å¼•äººï¼Œä½†å®žé™…ä¸Šï¼š**
- ä¸æ˜¯çœŸæ­£çš„å°ï¼ˆè¿è¡Œæ—¶ä»éœ€ 45MB+ï¼‰
- å¯åŠ¨æ…¢
- ä¸ç¬¦åˆ macOS è§„èŒƒ
- æœ‰å…¼å®¹æ€§é—®é¢˜

**33MB çš„è½»é‡çº§æ‰“åŒ…æ˜¯æœ€ä½³å¹³è¡¡ï¼š**
- âœ… ä½“ç§¯åˆç†
- âœ… å¯åŠ¨å¿«
- âœ… ç¬¦åˆ macOS è§„èŒƒ
- âœ… æ— ä¸´æ—¶æ–‡ä»¶
- âœ… æ˜“äºŽåˆ†å‘

**è®°ä½**ï¼šåœ¨ macOS ä¸Šï¼Œ`--onedir` + ä¼˜åŒ– > `--onefile`
